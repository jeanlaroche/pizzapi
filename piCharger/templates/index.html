<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery UI Slider - Default functionality</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<script type="text/javascript" charset="utf-8">
//    var socket = io.connect('http://' + document.domain + ':' + location.port);
//    socket.on('connect', function() {
//        socket.emit('my event', {data: 'I\'m connected!'});
//        socket.emit('my event', {data: 'Yepee'});
//    });
</script>
  <script>
  // Function called when the page is loaded.
  $( function() {
	$.getJSON('/_init', function(data)
			{
				$("#sliderV" ).slider('value',data.VOut)
				$("#sliderA" ).slider('value',data.AOut)
			})
  } );

$(document).ready(function(){
    var socket = io.connect('http://' + document.domain + ':' + location.port);
    socket.on('currentValues', function(msg) {
        $('#log2').text(msg.data);
        $('#AOut').text(msg.AOut.toFixed(2));
        $('#VOut').text(msg.VOut.toFixed(2));
    });
//    socket.on('targetVal', function(msg) {
//        $('#log').text(msg.data);
//    });
    $( "#sliderV" ).slider({
      slide: function( event, ui ) {
		socket.emit('setTargetV', {data: ui.value});
      },
    });
    $( "#sliderA" ).slider({
      slide: function( event, ui ) {
		socket.emit('setTargetA', {data: ui.value});
      },
    });

});
  </script>
<style>
h3 {text-align: center;}
h4 {text-align: left; color: green}
span {font-weight: bold;}
</style>

  </head>
<body>
 
<div ><p><h2>VOLTAGE CONTROLER</h2></p></div>

<div id="sliderV"></div>
<div ><p> </p></div>
<div ><p> </p></div>
<div id="sliderA"></div>
<div ><p> </p></div>
<div ><p> </p></div>
<span id="log2"></span> <br>
<div ><p> </p></div>
VOut: <span id="VOut"></span> V<br>
<div ><p> </p></div>
AOut: <span id="AOut"></span> A<br>
 
</body>
</html>